<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="icon" type="image/x-icon" href="AgeCalc.png">
    <title>Chronos | Ultimate Age Analytics</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;700;900&family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vanilla-tilt/1.8.0/vanilla-tilt.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        :root {
            /* Palette */
            --primary: #6366f1;
            --primary-rgb: 99, 102, 241;
            --secondary: #06b6d4;
            --secondary-rgb: 6, 182, 212;
            --accent: #f43f5e;
            --surface-light: #ffffff;
            --surface-dark: #0f172a;
            --text-light: #1e293b;
            --text-dark: #f8fafc;
            
            /* Glass & Depth */
            --glass: rgba(255, 255, 255, 0.7);
            --glass-border: rgba(255, 255, 255, 0.5);
            --glass-shadow: 0 8px 32px rgba(31, 38, 135, 0.1);
            --depth-shadow: 20px 20px 60px #d1d5db, -20px -20px 60px #ffffff;
            
            /* Animations */
            --ease-elastic: cubic-bezier(0.68, -0.55, 0.265, 1.55);
            --ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);
        }

        [data-theme="dark"] {
            --primary: #818cf8;
            --primary-rgb: 129, 140, 248;
            --glass: rgba(15, 23, 42, 0.6);
            --glass-border: rgba(255, 255, 255, 0.08);
            --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            --depth-shadow: 10px 10px 30px #0b1120, -10px -10px 30px #1e293b;
            --surface-light: #0f172a;
            --text-light: #f8fafc;
            --text-dark: #94a3b8;
        }

        * { margin:0; padding:0; box-sizing:border-box; -webkit-tap-highlight-color:transparent; }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background: var(--surface-light);
            color: var(--text-light);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            overflow-x: hidden;
            transition: background 0.4s ease, color 0.4s ease;
            /* Animated Mesh Gradient Background */
            background: radial-gradient(at 0% 0%, rgba(var(--primary-rgb), 0.15) 0px, transparent 50%),
                        radial-gradient(at 100% 0%, rgba(var(--secondary-rgb), 0.15) 0px, transparent 50%),
                        radial-gradient(at 100% 100%, rgba(244, 63, 94, 0.15) 0px, transparent 50%),
                        radial-gradient(at 0% 100%, rgba(168, 85, 247, 0.15) 0px, transparent 50%),
                        var(--surface-light);
            background-attachment: fixed;
            background-size: cover;
        }

        /* 3D Container */
        .app-container {
            width: 100%;
            max-width: 1000px;
            perspective: 2000px;
            z-index: 10;
        }

        /* Hyper-realistic Card */
        .main-card {
            background: var(--glass);
            backdrop-filter: blur(24px);
            -webkit-backdrop-filter: blur(24px);
            border: 1px solid var(--glass-border);
            border-radius: 32px;
            padding: 40px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.15);
            transform-style: preserve-3d;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        /* Subtle Noise Texture for Realism */
        .main-card::before {
            content: "";
            position: absolute;
            inset: 0;
            background: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.03'/%3E%3C/svg%3E");
            z-index: -1;
            pointer-events: none;
        }

        /* Header */
        .app-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            transform: translateZ(20px);
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .brand-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
            box-shadow: 0 10px 20px rgba(var(--primary-rgb), 0.3);
        }

        .brand-text h1 {
            font-size: 2rem;
            font-weight: 800;
            letter-spacing: -0.5px;
            background: linear-gradient(to right, var(--text-light), var(--primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .brand-text p {
            font-size: 0.9rem;
            color: var(--text-dark);
            opacity: 0.7;
        }

        /* Controls */
        .theme-toggle {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            border: 1px solid var(--glass-border);
            background: rgba(255,255,255,0.1);
            color: var(--text-light);
            cursor: pointer;
            transition: all 0.3s var(--ease-elastic);
            display: grid;
            place-items: center;
            font-size: 1.2rem;
        }
        .theme-toggle:hover {
            transform: rotate(45deg) scale(1.1);
            background: var(--surface-light);
        }

        /* Form */
        .input-group {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
            transform: translateZ(30px);
        }

        .field-wrapper {
            position: relative;
        }

        .field-label {
            display: block;
            margin-bottom: 8px;
            font-size: 0.85rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-dark);
            opacity: 0.7;
        }

        .modern-input {
            width: 100%;
            padding: 16px 20px;
            border-radius: 16px;
            border: 2px solid transparent;
            background: rgba(255,255,255,0.5);
            font-family: 'Outfit', sans-serif;
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-light);
            transition: all 0.3s ease;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.02);
        }
        [data-theme="dark"] .modern-input { background: rgba(15,23,42,0.5); }

        .modern-input:focus {
            outline: none;
            border-color: var(--primary);
            background: var(--surface-light);
            box-shadow: 0 0 0 4px rgba(var(--primary-rgb), 0.15);
            transform: translateY(-2px);
        }

        .calculate-btn {
            width: 100%;
            padding: 20px;
            border: none;
            border-radius: 20px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            font-family: 'Plus Jakarta Sans', sans-serif;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.4s var(--ease-elastic);
            transform: translateZ(40px);
            box-shadow: 0 20px 40px -10px rgba(var(--primary-rgb), 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            position: relative;
            overflow: hidden;
        }

        .calculate-btn::after {
            content: '';
            position: absolute;
            top: 0; left: -100%;
            width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: 0.5s;
        }

        .calculate-btn:hover {
            transform: translateY(-4px) translateZ(45px);
            box-shadow: 0 30px 60px -12px rgba(var(--primary-rgb), 0.5);
        }
        .calculate-btn:hover::after { left: 100%; }

        /* Results Area */
        .results-container {
            margin-top: 40px;
            display: none;
            animation: slideUp 0.6s var(--ease-elastic);
        }
        .results-container.visible { display: block; }

        .age-hero {
            text-align: center;
            margin-bottom: 40px;
            transform: translateZ(20px);
        }

        .age-hero-text {
            font-size: 3.5rem;
            font-weight: 900;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            line-height: 1.1;
            margin-bottom: 10px;
        }

        .zodiac-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 20px;
            background: rgba(var(--primary-rgb), 0.1);
            color: var(--primary);
            border-radius: 50px;
            font-weight: 700;
            font-size: 0.9rem;
            margin-top: 10px;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: rgba(255,255,255,0.4);
            padding: 20px;
            border-radius: 20px;
            border: 1px solid var(--glass-border);
            text-align: center;
            transition: all 0.3s ease;
            transform: translateZ(10px);
        }
        [data-theme="dark"] .stat-card { background: rgba(15,23,42,0.4); }

        .stat-card:hover {
            transform: translateY(-5px) translateZ(20px) scale(1.02);
            background: var(--surface-light);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--text-light);
            display: block;
            margin-bottom: 4px;
        }
        .stat-label {
            font-size: 0.85rem;
            color: var(--text-dark);
            opacity: 0.7;
        }

        /* Interactive Sections */
        .visuals-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        .info-panel {
            background: rgba(255,255,255,0.05);
            border-radius: 24px;
            padding: 25px;
            border: 1px solid var(--glass-border);
        }

        .panel-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--text-light);
        }
        .panel-header i { color: var(--accent); }

        .chart-wrapper {
            position: relative;
            height: 200px;
            width: 100%;
        }

        /* Ticker */
        .ticker-box {
            font-family: 'Orbitron', monospace; /* Tech feel */
            font-size: 1.2rem;
            color: var(--secondary);
            text-align: center;
            letter-spacing: 1px;
            margin-top: 15px;
        }

        /* Next Birthday */
        .countdown-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            text-align: center;
        }
        .cd-item span { font-size: 1.5rem; font-weight: 800; display: block; color: var(--primary); }
        .cd-item label { font-size: 0.7rem; opacity: 0.7; }

        /* Actions */
        .action-bar {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .action-btn {
            padding: 12px 24px;
            border-radius: 12px;
            border: 1px solid var(--glass-border);
            background: transparent;
            color: var(--text-light);
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }
        .action-btn:hover {
            background: var(--primary);
            color: white;
            border-color: transparent;
            transform: translateY(-2px);
        }

        /* Mobile */
        @media (max-width: 768px) {
            .main-card { padding: 25px; border-radius: 24px; }
            .input-group { grid-template-columns: 1fr; gap: 15px; }
            .visuals-row { grid-template-columns: 1fr; }
            .age-hero-text { font-size: 2.5rem; }
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(40px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body data-theme="light">

    <div class="app-container">
        <!-- Main Interactive Card with Tilt -->
        <div class="main-card" id="tiltCard" data-tilt data-tilt-max="3" data-tilt-speed="400" data-tilt-glare data-tilt-max-glare="0.2">
            
            <!-- Header -->
            <div class="app-header">
                <div class="brand">
                    <div class="brand-icon">
                        <i class="fa-solid fa-infinity"></i>
                    </div>
                    <div class="brand-text">
                        <h1>Chronos</h1>
                        <p>Temporal Analytics Engine</p>
                    </div>
                </div>
                <button class="theme-toggle" id="themeBtn" aria-label="Toggle Theme">
                    <i class="fa-solid fa-moon"></i>
                </button>
            </div>

            <!-- Input Section -->
            <div class="input-section">
                <div class="input-group">
                    <div class="field-wrapper">
                        <label class="field-label">Date of Birth</label>
                        <input type="number" id="day" class="modern-input" placeholder="DD" min="1" max="31">
                    </div>
                    <div class="field-wrapper">
                        <label class="field-label">Month</label>
                        <select id="month" class="modern-input">
                            <option value="0">January</option>
                            <option value="1">February</option>
                            <option value="2">March</option>
                            <option value="3">April</option>
                            <option value="4">May</option>
                            <option value="5">June</option>
                            <option value="6">July</option>
                            <option value="7">August</option>
                            <option value="8">September</option>
                            <option value="9">October</option>
                            <option value="10">November</option>
                            <option value="11">December</option>
                        </select>
                    </div>
                    <div class="field-wrapper">
                        <label class="field-label">Year</label>
                        <input type="number" id="year" class="modern-input" placeholder="YYYY" min="1900">
                    </div>
                </div>

                <button class="calculate-btn" onclick="calculateAge()">
                    <span>Analyze Timeline</span>
                    <i class="fa-solid fa-arrow-right"></i>
                </button>
            </div>

            <!-- Results Section -->
            <div id="results" class="results-container">
                <div class="age-hero">
                    <div class="age-hero-text" id="mainAgeDisplay">00 Years</div>
                    <div class="zodiac-badge" id="zodiacDisplay">
                        <i class="fa-solid fa-star"></i> <span>Unknown</span>
                    </div>
                    <div class="ticker-box" id="liveTicker">00y 00m 00d 00h 00m 00s</div>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <span class="stat-value" id="totalDays">0</span>
                        <span class="stat-label">Days Traveled</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-value" id="totalWeeks">0</span>
                        <span class="stat-label">Weeks Completed</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-value" id="nextMilestone">0</span>
                        <span class="stat-label">Next Milestone</span>
                    </div>
                </div>

                <div class="visuals-row">
                    <div class="info-panel">
                        <div class="panel-header"><i class="fa-solid fa-chart-pie"></i> Life Journey</div>
                        <div class="chart-wrapper">
                            <canvas id="lifeChart"></canvas>
                        </div>
                    </div>
                    <div class="info-panel">
                        <div class="panel-header"><i class="fa-solid fa-cake-candles"></i> Next Birthday</div>
                        <div class="countdown-grid">
                            <div class="cd-item"><span id="cdDays">0</span><label>DAYS</label></div>
                            <div class="cd-item"><span id="cdHours">0</span><label>HRS</label></div>
                            <div class="cd-item"><span id="cdMins">0</span><label>MIN</label></div>
                            <div class="cd-item"><span id="cdSecs">0</span><label>SEC</label></div>
                        </div>
                        <h4 style="text-align:center; margin-top:15px; font-weight:500; color:var(--text-dark); opacity:0.8" id="bdayDow">on a Monday</h4>
                    </div>
                </div>

                <div class="action-bar">
                    <button class="action-btn" onclick="reset()"><i class="fa-solid fa-rotate-right"></i> Reset</button>
                    <button class="action-btn" onclick="capture()"><i class="fa-solid fa-camera"></i> Save Card</button>
                </div>
            </div>

        </div>
    </div>

    <script>
        // State
        const state = {
            birthDate: null,
            timer: null,
            chart: null,
            theme: localStorage.getItem('theme') || 'light'
        };

        // DOM Elements
        const themeBtn = document.getElementById('themeBtn');
        const resultsEl = document.getElementById('results');

        // Init
        document.body.setAttribute('data-theme', state.theme);
        updateThemeIcon();
        
        // Tilt Init (Vanilla Tilt auto-inits on data-tilt attributes)

        // Theme Toggle
        themeBtn.addEventListener('click', () => {
            state.theme = state.theme === 'light' ? 'dark' : 'light';
            document.body.setAttribute('data-theme', state.theme);
            localStorage.setItem('theme', state.theme);
            updateThemeIcon();
            if(state.chart) updateChartTheme();
        });

        function updateThemeIcon() {
            const icon = themeBtn.querySelector('i');
            icon.className = state.theme === 'light' ? 'fa-solid fa-moon' : 'fa-solid fa-sun';
        }

        // Logic
        function calculateAge() {
            const d = document.getElementById('day').value;
            const m = document.getElementById('month').value;
            const y = document.getElementById('year').value;

            if(!d || !y) {
                shakeCard();
                return;
            }

            const birth = new Date(y, m, d);
            const now = new Date();

            if(birth > now) {
                alert("You haven't been born yet!");
                return;
            }

            state.birthDate = birth;
            
            // Show Results
            resultsEl.classList.add('visible');
            
            // Trigger Confetti
            confetti({
                particleCount: 100,
                spread: 70,
                origin: { y: 0.6 },
                colors: ['#6366f1', '#06b6d4', '#f43f5e']
            });

            // Start Live Updates
            updateLiveStats();
            if(state.timer) clearInterval(state.timer);
            state.timer = setInterval(updateLiveStats, 1000);

            // Render Static Stats
            renderZodiac(d, parseInt(m) + 1); // m is 0-indexed in JS
            renderChart(getAgeDetails(birth, now).years);
            
            // Smooth Scroll
            setTimeout(() => {
                resultsEl.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }, 100);
        }

        function updateLiveStats() {
            if(!state.birthDate) return;
            const now = new Date();
            const diff = now - state.birthDate;

            // Precise Breakdown
            const age = getAgeDetails(state.birthDate, now);
            
            // Main Display
            document.getElementById('mainAgeDisplay').textContent = `${age.years} Years, ${age.months} Months`;
            
            // Ticker
            document.getElementById('liveTicker').textContent = 
                `${age.years}y ${age.months}m ${age.days}d ${age.hours}h ${age.minutes}m ${age.seconds}s`;

            // Stats
            const totalDays = Math.floor(diff / (1000 * 60 * 60 * 24));
            document.getElementById('totalDays').textContent = totalDays.toLocaleString();
            document.getElementById('totalWeeks').textContent = Math.floor(totalDays / 7).toLocaleString();

            // Next Milestone
            const nextDecade = (Math.floor(age.years / 10) + 1) * 10;
            document.getElementById('nextMilestone').textContent = `Age ${nextDecade}`;

            // Countdown
            const nextBday = new Date(now.getFullYear(), state.birthDate.getMonth(), state.birthDate.getDate());
            if(now > nextBday) nextBday.setFullYear(now.getFullYear() + 1);
            
            const bdayDiff = nextBday - now;
            const d = Math.floor(bdayDiff / (1000 * 60 * 60 * 24));
            const h = Math.floor((bdayDiff / (1000 * 60 * 60)) % 24);
            const min = Math.floor((bdayDiff / 1000 / 60) % 60);
            const s = Math.floor((bdayDiff / 1000) % 60);

            document.getElementById('cdDays').textContent = d;
            document.getElementById('cdHours').textContent = h;
            document.getElementById('cdMins').textContent = min;
            document.getElementById('cdSecs').textContent = s;
            
            const days = ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];
            document.getElementById('bdayDow').textContent = `on a ${days[nextBday.getDay()]}`;
        }

        function getAgeDetails(birth, now) {
            let years = now.getFullYear() - birth.getFullYear();
            let months = now.getMonth() - birth.getMonth();
            let days = now.getDate() - birth.getDate();
            let hours = now.getHours() - birth.getHours();
            let minutes = now.getMinutes() - birth.getMinutes();
            let seconds = now.getSeconds() - birth.getSeconds();

            if (seconds < 0) { minutes--; seconds += 60; }
            if (minutes < 0) { hours--; minutes += 60; }
            if (hours < 0) { days--; hours += 24; }
            if (days < 0) {
                months--;
                days += new Date(now.getFullYear(), now.getMonth(), 0).getDate();
            }
            if (months < 0) { years--; months += 12; }

            return { years, months, days, hours, minutes, seconds };
        }

        function renderZodiac(day, month) {
            const zodiacs = [
                { name: 'Capricorn', sign: '♑', start: '01-01', end: '01-19' },
                { name: 'Aquarius', sign: '♒', start: '01-20', end: '02-18' },
                { name: 'Pisces', sign: '♓', start: '02-19', end: '03-20' },
                { name: 'Aries', sign: '♈', start: '03-21', end: '04-19' },
                { name: 'Taurus', sign: '♉', start: '04-20', end: '05-20' },
                { name: 'Gemini', sign: '♊', start: '05-21', end: '06-20' },
                { name: 'Cancer', sign: '♋', start: '06-21', end: '07-22' },
                { name: 'Leo', sign: '♌', start: '07-23', end: '08-22' },
                { name: 'Virgo', sign: '♍', start: '08-23', end: '09-22' },
                { name: 'Libra', sign: '♎', start: '09-23', end: '10-22' },
                { name: 'Scorpio', sign: '♏', start: '10-23', end: '11-21' },
                { name: 'Sagittarius', sign: '♐', start: '11-22', end: '12-21' },
                { name: 'Capricorn', sign: '♑', start: '12-22', end: '12-31' }
            ];
            
            // Simple logic: convert date to MMDD int for comparison
            const dateVal = (month * 100) + parseInt(day);
            let sign = zodiacs.find(z => {
                const [sM, sD] = z.start.split('-').map(Number);
                const [eM, eD] = z.end.split('-').map(Number);
                const start = sM * 100 + sD;
                const end = eM * 100 + eD;
                if(start <= end) return dateVal >= start && dateVal <= end;
                return dateVal >= start || dateVal <= end; // wrap around year
            });

            if(!sign) sign = zodiacs[0]; // Fallback

            const el = document.getElementById('zodiacDisplay');
            el.innerHTML = `<i class="fa-solid fa-star"></i> ${sign.name} ${sign.sign}`;
        }

        function renderChart(years) {
            const ctx = document.getElementById('lifeChart').getContext('2d');
            const lifeExp = 85; 
            const remaining = Math.max(0, lifeExp - years);

            if(state.chart) state.chart.destroy();

            state.chart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Lived', 'Future'],
                    datasets: [{
                        data: [years, remaining],
                        backgroundColor: [
                            state.theme === 'light' ? '#6366f1' : '#818cf8',
                            state.theme === 'light' ? '#e2e8f0' : '#1e293b'
                        ],
                        borderWidth: 0,
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '75%',
                    plugins: {
                        legend: { display: false },
                        tooltip: { enabled: false }
                    },
                    animation: {
                        animateScale: true,
                        animateRotate: true
                    }
                }
            });
        }

        function updateChartTheme() {
            if(state.chart) {
                state.chart.data.datasets[0].backgroundColor = [
                    state.theme === 'light' ? '#6366f1' : '#818cf8',
                    state.theme === 'light' ? '#e2e8f0' : '#1e293b'
                ];
                state.chart.update();
            }
        }

        function reset() {
            document.getElementById('day').value = '';
            document.getElementById('month').value = '0';
            document.getElementById('year').value = '';
            resultsEl.classList.remove('visible');
            state.timer = clearInterval(state.timer);
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        async function capture() {
            const btn = document.querySelector('.action-bar');
            btn.style.opacity = '0';
            const canvas = await html2canvas(document.querySelector('.main-card'), {
                scale: 2,
                backgroundColor: null
            });
            btn.style.opacity = '1';
            
            const link = document.createElement('a');
            link.download = 'Chronos_Age_Analysis.png';
            link.href = canvas.toDataURL();
            link.click();
        }

        function shakeCard() {
            const card = document.querySelector('.main-card');
            card.style.transform = 'translateX(10px)';
            setTimeout(() => card.style.transform = 'translateX(-10px)', 100);
            setTimeout(() => card.style.transform = 'translateX(10px)', 200);
            setTimeout(() => card.style.transform = 'translateX(0)', 300);
        }
    </script>
</body>
</html>